/*! jQuery Loading Progress - v1.0.2 - 2014-05-30 11:04
* https://github.com/DeuxHuitHuit/jQuery-loading-progress
* Copyright (c) 2014 Deux Huit Huit; Licensed MIT */
(function(e,t){"use strict";e.loadProgress={defaults:{load:null,global:!1,total:0,count:0,percent:0,debug:!1,fakeIncTimeout:1e3,timeBased:0,timeBasedPercent:0,minValue:30}};var n=function(t){if(!this.length||!this.each)return this;var n=e(this),r=e.extend({},e.loadProgress.defaults,e.isFunction(t)?{load:t}:t);!r.timeBased||(r.timeBased=Math.max(20,r.timeBased||0));var i=function(){r.percent=Math.max(Math.min(100,~~(r.count/r.total*100)||0),r.percent)},s=function(){h(),!!r.debug&&!!window.console&&console.log("window loaded at 100%, "+r.count+"/"+r.total),r.percent=100,r.global=!0,e.isFunction(r.load)&&r.load.call(n,r)},o=function(){var t=e(this),n=t.attr("src")||t.attr("data-src");h(),r.count++,r.global||(i(),!!r.debug&&!!window.console&&console.log(r.count+"/"+r.total+" "+n),!r.timeBased&&e.isFunction(r.load)&&r.load.call(t,r),c())},u=function(t){var n=[];t.each(function(t,r){var i=e(r),s=i.attr("src")||i.attr("data-src");!!s&&!~e.inArray(s,n)&&(n.push(s),i.load(o))}),r.total=n.length},a=function(){r.timeBasedPercent=r.percent<r.minValue?r.timeBasedPercent+1:Math.min(r.percent,r.timeBasedPercent+1),r.timeBasedGlobal=r.timeBasedPercent>=100,!!r.debug&&!!window.console&&console.log(r.percent,r.timeBasedPercent),e.isFunction(r.load)&&r.load.call(n,r),r.timeBasedGlobal||setTimeout(a,r.timeBased)},f=0,l=function(t){if(!!r.global)return;var i=~~(Math.random()*1e5)%(t||3);r.percent=Math.min(100,r.percent+(i+1)),!!r.debug&&!!window.console&&console.log(r.count+"/"+r.total+" *FAKE*"),!r.timeBased&&e.isFunction(r.load)&&r.load.call(n,r),c()},c=function(){!!r.fakeIncTimeout&&!r.global&&!f&&(f=setTimeout(l,r.fakeIncTimeout))},h=function(){!f||(clearTimeout(f),f=0)};return u(n),e(window).load(s),!r.timeBased||a(),l(20),n};e.fn.extend({loadProgress:n})})(jQuery);